webpackJsonp([1,4],{152:function(t,e,n){"use strict";var a=n(0);n.d(e,"a",function(){return r});var o=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=function(){function t(){this.chartDataSet={}}return t.prototype.getChartDataSet=function(){var t=this,e=[];return Object.keys(this.chartDataSet).forEach(function(n){e=e.concat(t.chartDataSet[n])}),e},t.prototype.addChartDataSet=function(t,e){this.chartDataSet[t]=e},t=o([n.i(a.Injectable)(),i("design:paramtypes",[])],t)}()},331:function(t,e,n){"use strict";var a=n(152),o=n(0);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this.chartDataService=t,this.chartData=[],this.show=!1,this.axis=[],this.header=[],this.dataTable=[],this.width=.7*window.innerWidth,this.height=.6*window.innerHeight,this.pieChartOptions={chartType:"LineChart",dataTable:this.dataTable,options:{title:"Tasks",width:this.width,height:this.height,chartArea:{width:.9*this.width,left:.1*this.width,top:.1*this.height,height:.8*this.height},legend:{position:"bottom"},interpolateNulls:!0,explorer:{actions:["dragToZoom","rightClickToReset"]}}}}return t.prototype.ngOnInit=function(){this.chartData=[],this.axis=[],this.header=[],this.dataTable=[],this.width=.7*window.innerWidth,this.height=.6*window.innerHeight},t.prototype.draw=function(){var t=this;this.ngOnInit(),this.chartData=this.chartDataService.getChartDataSet(),this.initAxis(),this.initDataTable(),this.axisToTime(),this.dataTable[0]=["Task"].concat(this.axis),this.dataTable=this.dataTable[0].map(function(e,n){return t.dataTable.map(function(t){return t[n]})}),this.pieChartOptions.dataTable=this.dataTable,this.pieChartOptions=Object.create(this.pieChartOptions),this.show=!0},t.prototype.initDataTable=function(){var t=this;this.chartData.map(function(e,n){var a=[];t.axis.forEach(function(t){a.push(Number(e.data[t]))}),t.dataTable[n+1]=[e.label].concat(a)})},t.prototype.initAxis=function(){this.axis=Object.keys(this.chartData[0].data).filter(function(t){return""!=t}),this.axis=this.axis.sort(function(t,e){return t>e?1:-1})},t.prototype.axisToTime=function(){this.axis=this.axis.map(function(t){return new Date(t)})},t=i([n.i(o.Component)({selector:"app-chart",template:n(678),styles:[n(672)]}),r("design:paramtypes",["function"==typeof(e="undefined"!=typeof a.a&&a.a)&&e||Object])],t);var e}()},332:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var a=function(){function t(){}return t}()},333:function(t,e,n){"use strict";var a=n(331),o=n(297),i=n(0);n.d(e,"a",function(){return s});var r=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.redraw=function(){this.chartComponent.show=!1,this.chartComponent.draw()},r([n.i(o.f)("chart"),c("design:type","function"==typeof(e="undefined"!=typeof a.a&&a.a)&&e||Object)],t.prototype,"chartComponent",void 0),t=r([n.i(i.Component)({selector:"app-price-trend",template:n(681),styles:[n(675)]}),c("design:paramtypes",[])],t);var e}()},388:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=388},389:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(476),o=n(0),i=n(516),r=n(509);i.a.production&&n.i(o.enableProdMode)(),n.i(a.a)().bootstrapModule(r.a)},507:function(t,e,n){"use strict";var a=n(333),o=n(0),i=n(496);n.d(e,"a",function(){return f});var r=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=[{path:"",redirectTo:"priceTrend",pathMatch:"full"},{path:"priceTrend",component:a.a}],f=function(){function t(){}return t=r([n.i(o.NgModule)({imports:[i.a.forRoot(s,{useHash:!0})],exports:[i.a],providers:[]}),c("design:paramtypes",[])],t)}()},508:function(t,e,n){"use strict";var a=n(0);n.d(e,"a",function(){return r});var o=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=function(){function t(){this.title="app works!"}return t=o([n.i(a.Component)({selector:"app-root",template:n(676),styles:[n(670)]}),i("design:paramtypes",[])],t)}()},509:function(t,e,n){"use strict";var a=n(152),o=n(149),i=n(0),r=n(466),c=n(472),s=n(507),f=n(508),p=n(510),l=n(333),u=n(511),d=n(513),h=n(331),b=n(668);n.n(b);n.d(e,"a",function(){return v});var g=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},y=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},v=function(){function t(){}return t=g([n.i(i.NgModule)({declarations:[f.a,p.a,l.a,u.a,d.a,h.a],imports:[o.a,r.a,c.a,s.a,b.Ng2GoogleChartsModule],providers:[a.a],bootstrap:[f.a]}),y("design:paramtypes",[])],t)}()},510:function(t,e,n){"use strict";var a=n(0);n.d(e,"a",function(){return r});var o=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=function(){function t(){}return t.prototype.ngOnInit=function(){},t=o([n.i(a.Component)({selector:"app-header",template:n(677),styles:[n(671)]}),i("design:paramtypes",[])],t)}()},511:function(t,e,n){"use strict";var a=n(512),o=n(152),i=n(332),r=n(685),c=(n.n(r),n(146)),s=n(0);n.d(e,"a",function(){return l});var f=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e){this.http=t,this.chartDataService=e,this.stations=[],this.selectedStations=[],this.allData=[]}return t.prototype.ngOnInit=function(){var t=this;this.http.get(a.a.stationURL).map(function(t){return t.json()}).subscribe(function(e){t.stations=e.map(function(t){return t.name})})},t.prototype.addItem=function(){this.selectedStations.push("")},t.prototype.deleteItem=function(t){this.selectedStations.splice(t,1),this.allData.splice(t,1)},t.prototype.onSelectChange=function(t,e){var n=this;this.http.get(a.a.byLocationURL+t+".csv").map(function(e){var a=new i.a;return a.y_axis=0,a.data=n.csvToChartData(e._body),a.label=t,a}).subscribe(function(t){n.allData[e]=t,n.chartDataService.addChartDataSet("cwb",n.allData)})},t.prototype.csvToChartData=function(t){var e={};return t.split("\n").forEach(function(t){e[t.split(",")[0]]=t.split(",")[1]}),e},t=f([n.i(s.Component)({selector:"app-cwb",template:n(679),styles:[n(673)]}),p("design:paramtypes",["function"==typeof(e="undefined"!=typeof c.a&&c.a)&&e||Object,"function"==typeof(r="undefined"!=typeof o.a&&o.a)&&r||Object])],t);var e,r}()},512:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var a=function(){function t(){}return t.stationURL="https://raw.githubusercontent.com/PDIS/vegeprice/master/cwb/stations.json",t.byLocationURL="https://raw.githubusercontent.com/PDIS/vegeprice/master/cwb/byLocation/",t}()},513:function(t,e,n){"use strict";var a=n(152),o=n(332),i=n(514),r=n(146),c=n(515),s=n(0);n.d(e,"a",function(){return l});var f=this&&this.__decorate||function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e){this.http=t,this.chartDataService=e,this.selectedSets=[],this.foods=[],this.markets=[],this.allData=[]}return t.prototype.ngOnInit=function(){var t=this;this.http.get(i.a.FoodURL).map(function(t){return t.json()}).subscribe(function(e){t.foods=e}),this.http.get(i.a.MarketURL).map(function(t){return t.json()}).subscribe(function(e){t.markets=["平均價格"].concat(e)})},t.prototype.addItem=function(){this.selectedSets.push(new c.a("","平均價格"))},t.prototype.deleteItem=function(t){this.selectedSets.splice(t,1),this.allData.splice(t,1)},t.prototype.onSelectChange=function(t){var e=this,n=this.selectedSets[t];""!==n.food&&""!==n.market&&this.http.get(i.a.byFoodURL+n.food+".csv").map(function(t){var a=new o.a;return a.y_axis=0,a.data=e.csvToChartData(t._body,n.market),a.label=n.food+"-"+n.market,a}).subscribe(function(n){e.allData[t]=n,e.chartDataService.addChartDataSet("edbkcg",e.allData)})},t.prototype.csvToChartData=function(t,e){var n={};return t.split("\n").splice(1).forEach(function(t){var e=t.split(",",3);e[0],e[1],e[2]}),n},t=f([n.i(s.Component)({selector:"app-edbkcg",template:n(680),styles:[n(674)]}),p("design:paramtypes",["function"==typeof(e="undefined"!=typeof r.a&&r.a)&&e||Object,"function"==typeof(l="undefined"!=typeof a.a&&a.a)&&l||Object])],t);var e,l}()},514:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var a=function(){function t(){}return t.FoodURL="https://raw.githubusercontent.com/PDIS/vegeprice/master/edbkcg/foods.json",t.MarketURL="https://raw.githubusercontent.com/PDIS/vegeprice/master/edbkcg/markets.json",t.byFoodURL="https://raw.githubusercontent.com/PDIS/vegeprice/master/edbkcg/byFood/",t}()},515:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var a=function(){function t(t,e){this.food=t,this.market=e}return t}()},516:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var a={production:!0}},670:function(t,e){t.exports=""},671:function(t,e){t.exports=".logo{height:50px;padding:0;margin-right:15px;margin-left:0!important}"},672:function(t,e){t.exports=":host /deep/ svg{width:100%}"},673:function(t,e){t.exports=""},674:function(t,e){t.exports=""},675:function(t,e){t.exports=".sidebar{position:fixed;top:51px;bottom:0;z-index:1000;display:block;padding:20px;overflow-x:hidden;overflow-y:auto;background-color:#f5f5f5;border-right:1px solid #eee}"},676:function(t,e){t.exports="<app-header></app-header>\n<router-outlet></router-outlet>"},677:function(t,e){t.exports='<nav class="navbar navbar-default navbar-fixed-top">\n    <div class="navbar-header">\n        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">\n              <span class="sr-only">Toggle navigation</span>\n              <span class="icon-bar"></span>\n              <span class="icon-bar"></span>\n              <span class="icon-bar"></span>\n            </button>\n        <img class="navbar-brand logo" src="assets/PDIS-logo-revised.png" alt="" style="height:50px">\n        <a class="navbar-brand" href="#">\n              菜價看板\n            </a>\n    </div>\n    <div id="navbar" class="navbar-collapse collapse">\n        <ul class="nav navbar-nav">\n            <li [routerLinkActive]="[\'active\']"><a [routerLink]="[\'endorses\']">價格趨勢</a></li>\n        </ul>\n    </div>\n    <!--/.nav-collapse -->\n</nav>\n<div style="height: 50px"></div>'},678:function(t,e){t.exports='<google-chart [data]="pieChartOptions" *ngIf="show" #googleChart></google-chart>'},679:function(t,e){t.exports='<h4>\n    中央氣象局雨量資訊\n    <button class="btn btn-default btn-xs" (click)="addItem()">＋</button>\n</h4>\n\n<div class="button-group" *ngFor="let item of selectedStations; let i = index">\n    <select class="select-item" name="item_{{i}}" [(ngModel)]="selectedStations[i]" (ngModelChange)="onSelectChange($event,i)">\n      <option *ngFor="let station of stations">{{station}}</option>\n    </select>\n    <button class="btn btn-xs btn-danger" (click)="deleteItem(i)">－</button>\n</div>\n<p *ngIf="selectedStations.length===0">尚未選擇資料...</p>\n<hr>'},680:function(t,e){t.exports='<h4>\n    高雄市公有市場零售價格\n    <button class="btn btn-default btn-xs" (click)="addItem()">＋</button>\n</h4>\n\n<div class="button-group" *ngFor="let item of selectedSets; let i = index">\n\n    <select class="select-item" name="food_{{i}}" [(ngModel)]="selectedSets[i][\'food\']" (ngModelChange)="onSelectChange(i)">\n      <option *ngFor="let food of foods" >{{food}}</option>\n    </select>\n    <select class="select-item" name="market_{{i}}" [(ngModel)]="selectedSets[i][\'market\']" (ngModelChange)="onSelectChange(i)">\n      <option *ngFor="let market of markets">{{market}}</option>\n    </select>\n\n    <button class="btn btn-xs btn-danger" (click)="deleteItem(i)">－</button>\n</div>\n<p *ngIf="selectedSets.length===0">尚未選擇資料...</p>\n<hr>'},681:function(t,e){t.exports='<div class="col-xs-3 sidebar">\n    <ul class="nav nav-sidebar">\n        <li>\n            <app-cwb></app-cwb>\n        </li>\n        <li>\n            <app-edbkcg></app-edbkcg>\n        </li>\n    </ul>\n    <button type="button" class="btn btn-success" (click)="redraw()">更新圖表</button>\n</div>\n<div class="col-xs-9 col-xs-offset-3">\n    <app-chart #chart></app-chart>\n</div>'},699:function(t,e,n){t.exports=n(389)}},[699]);